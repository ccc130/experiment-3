// 邮箱验证控制器
// 文件路径: src/main/java/com/supermarket/email/EmailVerificationController.java
@RestController
@RequestMapping("/api/email")
public class EmailVerificationController {
    
    // 类成员变量
    private final EmailService mEmailService;
    
    @Autowired
    public EmailVerificationController(EmailService emailService) {
        this.mEmailService = emailService;
    }

    @PostMapping("/send")
    public ResponseEntity<?> sendVerificationEmail(@RequestBody UserRequest request) {
        String token = TokenGenerator.generateToken();
        boolean isSent = mEmailService.sendVerificationEmail(
            request.getUserEmail(), 
            token
        );
        return isSent ? ResponseEntity.ok().build() : 
               ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build();
    }
}
